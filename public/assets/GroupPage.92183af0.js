import{bw as V,cr as l,bJ as g,u as w,aL as d,a3 as m,b5 as p,aD as a,a6 as r,d as u,c2 as f,a5 as b,aJ as P,F as G}from"./index.c62d8a64.js";import{Q as C}from"./QPage.b2fd791d.js";import{P as D}from"./PermissionsModule.f76066f3.js";import{S as N}from"./SkeletonSinglePage.f07820b6.js";import{u as J}from"./group.121f5b6b.js";import"./QItemLabel.79290e29.js";import"./QSkeleton.2e510be2.js";const _={permissions:[]},q={components:{PermissionsModule:D,SkeletonSinglePage:N},data(){return{default:l.exports.cloneDeep(_),group:l.exports.cloneDeep(_),modules:[],groups:[],selected:[],loaded:!1,submited:!1}},methods:{...g(J,["store","show","update"]),...g(w,["getModules"]),onSubmit(e){console.func("pages/core/groups/GroupPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.group).then(({data:o,message:c})=>{this.submited=!1,this.$q.notify(c),this.group=o,this.default=l.exports.cloneDeep(o),this.$router.push({name:"Single Group",params:{id:o.id},query:{action:"edit"}})}).catch(o=>{this.submited=!1,this.$core.error(o,{title:"Error"})})},onReset(e){console.func("pages/core/groups/GroupPage:methods.onReset()",arguments),this.loaded=!1,this.$nextTick(()=>{this.group=l.exports.cloneDeep(this.default),this.loaded=!0})},onCancel(e){console.func("pages/core/groups/GroupPage:methods.onCancel()",arguments),this.$router.go(-1)}},async mounted(){await this.getModules().then(e=>{this.modules=e.modules,this.groups=e.groups}),this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.group=e,this.default=l.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.group)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.group)!==JSON.stringify(this.default)}}},R={class:"q-gutter-md"},B={class:"col-xs-12 col-sm-12"},O=r("div",{class:"text-label"},"Name",-1),M={class:"col-xs-12"},Q=r("div",{class:"text-label"},"Description",-1),U={class:"row q-col-gutter-md"};function A(e,t,o,c,s,i){const h=d("base-section"),x=d("permissions-module"),y=d("base-form"),S=d("skeleton-single-page");return a(),m(C,{padding:""},{default:p(()=>[s.loaded?(a(),m(y,{key:0,onSubmit:i.onSubmit,onCancel:i.onCancel,onReset:i.onReset,resetable:i.resetable,disable:i.disable,submited:s.submited},{default:p(()=>[r("div",R,[u(h,{title:"General information"},{default:p(()=>[r("div",B,[O,u(f,{dense:"",outlined:"",modelValue:s.group.name,"onUpdate:modelValue":t[0]||(t[0]=n=>s.group.name=n),type:"text"},null,8,["modelValue"])]),r("div",M,[Q,u(f,{dense:"",outlined:"",modelValue:s.group.description,"onUpdate:modelValue":t[1]||(t[1]=n=>s.group.description=n),type:"textarea"},null,8,["modelValue"])])]),_:1}),u(h,{"no-row":"",title:"Permissions",description:"Give staff access to your store by sending them an invitation. If you\u2019re working with a designer, developer, or marketer, find out how to give collaborator access to your store."},{default:p(()=>[r("div",U,[(a(!0),b(G,null,P(s.modules,(n,v)=>(a(),b("div",{class:"col-xs-12 col-sm-4",key:n.id},[u(x,{edit:"",modelValue:s.group.permissions,"onUpdate:modelValue":t[2]||(t[2]=k=>s.group.permissions=k),module:s.modules[v]},null,8,["modelValue","module"])]))),128))])]),_:1})])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(a(),m(S,{key:1}))]),_:1})}var H=V(q,[["render",A]]);export{H as default};
