import{bu as J,i as W,ca as V,d4 as X,r as C,c as b,w as _,av as Y,cF as Z,h as q,g as ee,bK as E,u as F,bw as S,aL as L,aD as o,a3 as m,b5 as n,d as r,bz as w,a5 as g,ac as x,F as k,a4 as Q,a6 as R,aJ as T,b7 as B,bx as $,bG as y,S as I,bI as H,co as N,bL as te,ar as ae}from"./index.d66dd298.js";import{Q as O,a as se}from"./QDrawer.84e8a583.js";import{a as re,Q as j}from"./QSpace.e12632dd.js";import{Q as le}from"./QResizeObserver.88c0a24f.js";import{_ as ne}from"./logo.f8423396.js";import{Q as U}from"./QItemLabel.4056359e.js";import{Q as oe}from"./QExpansionItem.a5405470.js";var ue=J({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:i,emit:l}){const{proxy:{$q:h}}=ee(),a=W(X,V);if(a===V)return console.error("QHeader needs to be child of QLayout"),V;const u=C(parseInt(e.heightHint,10)),s=C(!0),v=b(()=>e.reveal===!0||a.view.value.indexOf("H")>-1||h.platform.is.ios&&a.isContainer.value===!0),d=b(()=>{if(e.modelValue!==!0)return 0;if(v.value===!0)return s.value===!0?u.value:0;const t=u.value-a.scroll.value.position;return t>0?t:0}),D=b(()=>e.modelValue!==!0||v.value===!0&&s.value!==!0),A=b(()=>e.modelValue===!0&&D.value===!0&&e.reveal===!0),M=b(()=>"q-header q-layout__section--marginal "+(v.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(D.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),K=b(()=>{const t=a.rows.value.top,f={};return t[0]==="l"&&a.left.space===!0&&(f[h.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),t[2]==="r"&&a.right.space===!0&&(f[h.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),f});function c(t,f){a.update("header",t,f)}function p(t,f){t.value!==f&&(t.value=f)}function P({height:t}){p(u,t),c("size",t)}function G(t){A.value===!0&&p(s,!0),l("focusin",t)}_(()=>e.modelValue,t=>{c("space",t),p(s,!0),a.animate()}),_(d,t=>{c("offset",t)}),_(()=>e.reveal,t=>{t===!1&&p(s,e.modelValue)}),_(s,t=>{a.animate(),l("reveal",t)}),_(a.scroll,t=>{e.reveal===!0&&p(s,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const z={};return a.instances.header=z,e.modelValue===!0&&c("size",u.value),c("space",e.modelValue),c("offset",d.value),Y(()=>{a.instances.header===z&&(a.instances.header=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const t=Z(i.default,[]);return e.elevated===!0&&t.push(q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(q(le,{debounce:0,onResize:P})),q("header",{class:M.value,style:K.value,onFocusin:G},t)}}});const ie={emits:["update-left-drawer"],methods:{onUpdateLeftDrawer(){this.$emit("update-left-drawer")},onSave(){console.func("layouts/Dashboard:methods.onSave()",arguments),window.dispatchEvent(new Event("form:save"))},onDiscard(){console.func("layouts/Dashboard:methods.onDiscard()",arguments),window.dispatchEvent(new Event("form:discard"))}},computed:{...E(F,["user","isDirt","isLoading"])}},de=R("img",{class:"self-center",width:"120",src:ne},null,-1),ce={class:"row no-wrap q-col-gutter-md"},me={key:0,class:"column self-center"};function fe(e,i,l,h,a,u){const s=L("base-current-user");return o(),m(ue,{bordered:"",class:"base-header bg-white text-black"},{default:n(()=>[r(j,null,{default:n(()=>[r(w,{flat:"",round:"",size:"15px",color:"primary",icon:"menu","aria-label":"Menu",dense:"",onClick:u.onUpdateLeftDrawer},null,8,["onClick"]),e.isDirt?(o(),g(k,{key:0},[r(O,null,{default:n(()=>[x("Unsaved changes")]),_:1}),r(w,{"no-caps":"",onClick:u.onDiscard,label:"Discard",color:"negative",class:"q-mr-sm"},null,8,["onClick"]),r(w,{"no-caps":"",label:"Save",onClick:u.onSave,type:"submit",color:"primary",loading:e.isLoading},null,8,["onClick","loading"])],64)):(o(),g(k,{key:1},[r(O,null,{default:n(()=>[de]),_:1}),e.$q.screen.gt.xs?(o(),m(re,{key:0})):Q("",!0),R("div",ce,[e.user?(o(),g("div",me,[r(s,{class:"q-pa-none cursor-pointer",style:{width:"180px"}})])):Q("",!0)])],64))]),_:1})]),_:1})}var Le=S(ie,[["render",fe]]);const ve={props:{title:{type:String,required:!0},route:{type:String,default:""},params:{type:Object,default:()=>({})},icon:{type:String,default:""},notification:[String,Number],subLinks:{type:[Object,Boolean],default:!1}},computed:{active:{get(){return this.$route.meta.base===this.route},set(e){return e}}},methods:{isActive(e){return e.route===this.$route.meta.module||e.route===this.$route.meta.premission||e.route===this.$route.name}}};function he(e,i,l,h,a,u){return l.subLinks?(o(),m(oe,{key:0,modelValue:u.active,"onUpdate:modelValue":i[0]||(i[0]=s=>u.active=s),icon:l.icon,label:l.title,"expand-icon-class":"hidden",class:"sublinks","header-class":{"sublink-active":u.active},to:{name:l.route}},{default:n(()=>[(o(!0),g(k,null,T(l.subLinks,(s,v)=>B((o(),m(H,{key:v,clickable:"",tag:"a",to:{name:s.route,params:s.params},"active-class":"active"},{default:n(()=>[r(y,{avatar:"",style:{"min-width":"auto"},class:"q-pr-md"},{default:n(()=>[r($,{name:s.icon,size:"18px"},null,8,["name"])]),_:2},1024),r(y,{class:"title"},{default:n(()=>[r(U,null,{default:n(()=>[x(I(s.title),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["to"])),[[N]])),128))]),_:1},8,["modelValue","icon","label","header-class","to"])):B((o(),m(H,{key:1,clickable:"",tag:"a",to:{name:l.route,params:l.params},"active-class":"active"},{default:n(()=>[r(y,{avatar:"",style:{"min-width":"auto"},class:"q-pr-md"},{default:n(()=>[r($,{name:l.icon,size:"18px"},null,8,["name"])]),_:1}),r(y,{class:"title"},{default:n(()=>[r(U,null,{default:n(()=>[x(I(l.title),1)]),_:1})]),_:1}),l.notification?(o(),m(y,{key:0,side:"",class:"notification"},{default:n(()=>[r(w,{size:"10px",flat:"",class:"bg-primary text-bold",color:"white",label:l.notification,round:"",dense:""},null,8,["label"])]),_:1})):Q("",!0)]),_:1},8,["to"])),[[N]])}var be=S(ve,[["render",he]]);const pe={components:{LinksList:be},props:{modelValue:{required:!1},sideMenus:{required:!0,type:Array}},emits:["update:model-value"],data(){return{value:this.modelValue}},methods:{toggle(){this.$refs.drawer.toggle()}},computed:{...E(F,["user"])}};function _e(e,i,l,h,a,u){const s=L("base-current-user"),v=L("links-list");return o(),m(se,{ref:"drawer",modelValue:a.value,"onUpdate:modelValue":[i[0]||(i[0]=d=>a.value=d),i[1]||(i[1]=d=>e.$emit("update:model-value",d))],"show-if-above":"",width:250,side:"left",class:"bg-white text-black"},{default:n(()=>[e.user&&e.$q.screen.lt.sm?(o(),m(j,{key:0,class:"q-pa-md"},{default:n(()=>[r(s,{class:"q-pa-none cursor-pointer",style:{width:"100%"}})]),_:1})):Q("",!0),r(te,{class:"bg-white"},{default:n(()=>[(o(!0),g(k,null,T(l.sideMenus,d=>(o(),m(v,ae({class:"link-item",key:d.title},d),null,16))),128))]),_:1})]),_:1},8,["modelValue"])}var xe=S(pe,[["render",_e]]);export{Le as L,xe as a};
