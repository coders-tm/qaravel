import{bw as b,bJ as _,u as y,cr as p,aL as x,a3 as l,b5 as a,aD as n,d as i,a6 as k,a5 as w,aJ as C,F as Q,bG as u,bx as A,ac as B,S as D,b7 as N,bz as f,bt as h,a4 as g,br as P,aN as L,ar as R}from"./index.c62d8a64.js";import{Q as m}from"./QItemLabel.79290e29.js";import{Q as U}from"./QExpansionItem.67fe55a2.js";import{Q as q}from"./QPage.b2fd791d.js";const E={data(){return{options:[],default:[],loaded:!1,save:!1,settings:[{label:"App Configs",key:"app-configs",icon:"fas fa-folder-gear",component:"app-configs"}]}},methods:{..._(y,["getSettings","updateSettings"]),onLoad({key:t}){this.loaded=!1,this.getSettings(t).then(e=>{this.options=e,this.default=p.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$core.error(e,{title:"Error"}),this.loaded=!0})},onUpdate({value:t,rowIndex:e}){console.func("pages/admins/SettingsPage:methods.onUpdate()",arguments),e&&Object.assign(this.options[e],t)},onRemove(t){console.func("pages/admins/SettingsPage:methods.onRemove()",arguments),this.options.splice(t,1)},onAdd({option:t}){console.func("pages/admins/SettingsPage:methods.onAdd()",arguments),this.options.push({...t,id:Date.now()})},onSave({key:t}){console.func("pages/admins/SettingsPage:methods.onSave()",arguments),this.save=!0,this.updateSettings({key:t,options:this.options}).then(({message:e})=>{this.$q.notify(e),this.loaded=!1,this.$nextTick(()=>{this.save=!1,this.default=p.exports.cloneDeep(this.options),this.loaded=!0})}).catch(e=>{this.save=!1,this.$core.error(e,{title:"Error"})})}},mounted(){this.onLoad(this.settings[0])},computed:{canSave(){return this.default&&JSON.stringify(this.options)!==JSON.stringify(this.default)}}},J={class:"q-mt-md q-gutter-y-xs"};function V(t,e,z,I,r,o){const v=x("base-section");return n(),l(q,{padding:""},{default:a(()=>[i(v,{"no-row":"",title:"App Settings",description:"Here you can configure your timezone and date formatting that will apply to all of the control panel."},{default:a(()=>[k("div",J,[(n(!0),w(Q,null,C(r.settings,(s,d)=>(n(),l(U,{"header-class":"bg-grey-4 text-subtitle2 text-black","expand-icon-class":"text-black",key:d,icon:s.icon,label:s.label,onBeforeShow:c=>o.onLoad(s),"default-opened":d===0,group:"settings"},{header:a(({expanded:c})=>[i(u,null,{default:a(()=>[i(m,{class:"flex items-center"},{default:a(()=>[i(A,{size:"19px",name:s.icon,class:"q-mr-sm"},null,8,["name"]),B(" "+D(s.label),1)]),_:2},1024)]),_:2},1024),N(i(u,{side:""},{default:a(()=>[i(m,null,{default:a(()=>[s.canAdd?(n(),l(f,{key:0,color:"primary",onClick:h(S=>o.onAdd(s),["stop"]),icon:"fad fa-circle-plus",dense:"",round:"",flat:""},null,8,["onClick"])):g("",!0),o.canSave?(n(),l(f,{key:1,color:"primary",onClick:h(S=>o.onSave(s),["stop"]),icon:"fad fa-save",dense:"",round:"",flat:"",loading:r.save},null,8,["onClick","loading"])):g("",!0)]),_:2},1024)]),_:2},1536),[[P,c]])]),default:a(()=>[(n(),l(L(s.component),R(s,{options:r.options,loaded:r.loaded,onRemove:o.onRemove,onUpdate:o.onUpdate}),null,16,["options","loaded","onRemove","onUpdate"]))]),_:2},1032,["icon","label","onBeforeShow","default-opened"]))),128))])]),_:1})]),_:1})}var G=b(E,[["render",V]]);export{G as default};
