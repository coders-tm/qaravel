import{Q as w}from"./QPage.a9a1ce60.js";import{bw as k,bJ as C,bK as _,aL as i,a3 as b,b5 as s,aD as l,d as r,bt as p,a6 as E,S as u,ac as f,a5 as P,F as v}from"./index.d66dd298.js";import{u as d}from"./enquiry.b3ba4ca8.js";const S={data(){return{loading:!1,loaded:!1,pagination:{sortBy:"id",descending:!0,page:1,filter:"",status:"Open",advancedFilter:{},deleted:!1,rowsPerPage:15,rowsNumber:15,loaded:!1},useEnquiryStore:d()}},methods:{...C(d,["get"]),onRequest(e){console.func("admins/enquiries/EnquirysPage:methods.onRequest()",arguments);const{page:t,rowsPerPage:c,sortBy:g,descending:n}=e.pagination;this.loading=!0,this.get({...e.pagination,direction:n?"desc":"asc"}).then(({meta:a})=>{this.pagination.rowsNumber=a.total,this.pagination.page=t,this.pagination.rowsPerPage=c,this.pagination.sortBy=g,this.pagination.descending=n,this.pagination.loaded=!0,this.pagination.from=a.from,this.pagination.to=a.to,this.loading=!1}).catch(a=>{this.$core.error(a,{title:"Error"})})},async actionClicked(e,t){console.func("admins/enquiries/EnquirysPage:methods.actionClicked()",arguments)},async toolbarClicked(e,t){console.func("admins/enquiries/EnquirysPage:methods.toolbarClicked()",arguments)},async rowClicked(e,t){console.func("admins/enquiries/EnquirysPage:methods.rowClicked()",arguments),this.$router.push({name:"Single Enquiry",params:{id:t.id,title:t.subject||"Contact us"},query:{action:"edit"}})}},mounted(){this.onRequest({pagination:this.pagination})},computed:{..._(d,["actions","rows","columns","module","toolbar","filters"]),permissions(){return[]},getColumns(){return this.columns.filter(e=>e.guard.includes(this.guard))},guard(){return this.$route.meta.guard},getToolbar(){return this.toolbar.filter(e=>e.guard.includes(this.guard))}}},R={class:"ellipsis"};function B(e,t,c,g,n,a){const m=i("base-btn"),h=i("base-status"),y=i("base-table"),q=i("base-section");return l(),b(w,{padding:""},{default:s(()=>[r(q,{"no-row":""},{default:s(()=>[r(y,{store:n.useEnquiryStore,module:e.module,columns:a.getColumns,rows:e.rows,toolbar:a.getToolbar,filters:e.filters,loading:n.loading,pagination:n.pagination,onRequest:a.onRequest,onToolbarClicked:a.toolbarClicked,onRowClicked:a.rowClicked,"no-data-label":"No enquiries avaialble","no-permissions":""},{"body-cell-id":s(o=>[r(m,{onClick:t[0]||(t[0]=p(()=>{},["stop"])),link:"",size:"12px",tag:"a",to:{name:"Single Enquiry",params:{id:o.row.id,title:o.row.subject||"Contact us"},query:{action:"edit"}}},{default:s(()=>[E("div",R,u(o.value),1)]),_:2},1032,["to"])]),"body-cell-name":s(o=>[o.row.user?(l(),b(m,{key:0,onClick:t[1]||(t[1]=p(()=>{},["stop"])),link:"",size:"12px",tag:"a",to:{name:"Single Member",params:{id:o.row.user.id},query:{action:"edit"}}},{default:s(()=>[f(u(o.value),1)]),_:2},1032,["to"])):(l(),P(v,{key:1},[f(u(o.value),1)],64))]),"body-cell-status":s(o=>[r(h,{type:o.value},null,8,["type"])]),_:1},8,["store","module","columns","rows","toolbar","filters","loading","pagination","onRequest","onToolbarClicked","onRowClicked"])]),_:1})]),_:1})}var F=k(S,[["render",B]]);export{F as default};
